---
title: 前端面试题准备 - CSS
date: 2025-02-17 21:59:49
tags:
  - Interview
  - Frontend
  - JavaScript
categories:
  - Interview
top_img: /img/interview.jpg
cover: /img/interview.jpg
---

## BFC 是什么？

BFC 是 **块级格式化上下文（Block Formatting Context）** 的缩写。它定义了一个独立的渲染区域，包含了元素及其子元素的布局规则，决定了这些元素如何与其他元素进行交互，特别是在垂直方向上。

**BFC 特点**：

- **独立的布局环境**：BFC 内部的元素布局不受外部元素的影响。
- **垂直方向上的布局规则**：BFC 会影响元素如何在垂直方向上与其他元素进行排列。比如，BFC 内部的子元素会垂直排列，而外部的元素不会影响到内部的元素。
- **清除浮动**：浮动元素脱离了正常的文档流，可能导致父容器高度塌陷。通过创建 BFC，父容器会自动“包裹”浮动的子元素，从而解决这个问题。

**BFC 的触发条件**：

- **浮动元素** (`float: left;` 或 `float: right;`)。
- **绝对定位的元素** (`position: absolute;` 或 `position: fixed;`)。
- **行内块元素** (`display: inline-block;`)。
- **块级元素** 设置了 `overflow` 值为 `hidden`、`auto` 或 `scroll`。
- **弹性布局容器** (`display: flex;` 或 `display: inline-flex;`)。
- **网格布局容器** (`display: grid;` 或 `display: inline-grid;`)。

**BFC 的应用**：

- **清除浮动**：由于浮动元素会脱离正常文档流并可能导致父容器的高度塌陷，我们可以通过让父元素创建一个 BFC 来解决这个问题。比如，给父元素加上 `overflow: hidden;` 来触发 BFC。
- **防止 margin 重叠**：正常情况下，垂直相邻的块级元素的 margin 会发生合并，导致它们之间的空间变小。但在 BFC 中，相邻元素的 margin 不会合并。
- **布局隔离**：BFC 可以用来创建布局隔离区域，例如通过在容器上使用 `float` 或 `position` 属性，来使容器内的元素独立布局而不受外部影响。

## 重绘和重排

**重绘**：重绘是指当页面元素的 **外观** 发生变化时，浏览器重新绘制这些元素，但不会影响元素的布局。常见的情况如更改背景色、文本颜色等，不会影响元素的位置和大小。

**重排**：重排是指当页面元素的 **布局** 发生变化时，浏览器需要重新计算元素的几何属性（如宽度、高度、位置等），并更新页面的结构。这比重绘更耗费性能，因为需要重新计算和重新布局整个文档或部分文档。

**重排一定导致重绘，重绘不一定导致重排。**

**引发重绘和重排的原因**：

- 添加或者删除可见的 DOM 元素
- 元素尺寸位置的改变
- 浏览器页面初始化
- 浏览器窗口大小发生改变

**减少重绘和重排的方法**：

- 不在布局信息改变时做 DOM 查询
- 尽量将多个DOM修改合并成一次操作，避免频繁的修改，比如使用类名批量操作元素样式。
- 使用 `documentFragment` 批量插入元素，减少对DOM的频繁访问
- 对于多次重排的元素，比如说动画。使用绝对定位脱离文档流，使其不影响其他元素
